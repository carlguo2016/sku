(function(t){function e(e){for(var i,o,c=e[0],r=e[1],l=e[2],p=0,d=[];p<c.length;p++)o=c[p],a[o]&&d.push(a[o][0]),a[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(i=!1)}i&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},s=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"506b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=n("5c96"),s=n.n(a),o=(n("0fae"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("specification",{attrs:{test:"",spec:t.spec,sku:t.sku}})],1)])}),c=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"standard"},[n("div",{staticClass:"standard-container"},[t._l(t.specification,function(e,i){return n("div",{key:i,staticClass:"standard-panel"},[n("div",{staticClass:"standard-head"},[n("div",{staticClass:"standard-group"},[n("div",{staticClass:"inline-text inline-title"},[t._v("规格名:")]),n("el-input",{staticClass:"inline-input",attrs:{size:"mini"},on:{blur:function(e){return t.handleChangeSpecification("add")}},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"spec.name"}}),t.image&&0===i?n("el-checkbox",{attrs:{label:"规格图片",border:"",size:"mini"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}):t._e()],1),n("i",{staticClass:"el-icon-error",on:{click:function(e){return t.handleRemoveSpecification(i)}}})]),n("div",{staticClass:"standard-lists"},[n("div",{staticClass:"standard-value inline-text inline-title"},[t._v("规格值:")]),t._l(e.attribute,function(e,a){return n("div",{key:a,staticClass:"standard-value standard-input"},[n("el-tag",{attrs:{size:"medium",closable:""},on:{close:function(e){return t.handleRemoveAttribute(i,a)}}},[t._v(t._s(e))])],1)}),t.visiableCache[i]?n("div",{staticClass:"standard-input",staticStyle:{width:"92px",margin:"0"}},[n("el-input",{ref:"input_"+i,refInFor:!0,attrs:{size:"mini"},on:{blur:function(e){return t.handleAddAttribute(i)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleAddAttribute(i)}},model:{value:t.attributeModelCache[i],callback:function(e){t.$set(t.attributeModelCache,i,e)},expression:"attributeModelCache[indent]"}})],1):n("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleToggleInput(i)}}},[t._v("添加规格值")])],2)])}),t.enable?n("el-button",{staticClass:"standard-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:t.handlePushSpecification}},[t._v("添加规格")]):n("el-tooltip",{staticClass:"item",attrs:{content:"最多支持"+t.max+"条规格",effect:"dark",placement:"top"}},[n("el-button",{staticClass:"standard-btn",attrs:{type:"info",size:"mini",plain:""}},[t._v("添加规格")])],1)],2),t.skus.length?[n("el-table",{staticStyle:{"margin-top":"10px"},attrs:{border:"",data:t.data,"span-method":t.handleSpanMethod}},[t._l(t.specification,function(t,e){return n("el-table-column",{key:e,attrs:{prop:t.name,label:t.name}})}),n("el-table-column",{attrs:{prop:"price",label:"价格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:0,"controls-position":"right",precision:2,size:"mini"},model:{value:t.skus[e.$index].price,callback:function(n){t.$set(t.skus[e.$index],"price",n)},expression:"skus[scope.$index].price"}})]}}],null,!1,1579658790)}),n("el-table-column",{attrs:{prop:"marked_price",label:"市场价",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:0,"controls-position":"right",precision:2,size:"mini"},model:{value:t.skus[e.$index].marked_price,callback:function(n){t.$set(t.skus[e.$index],"marked_price",n)},expression:"skus[scope.$index].marked_price"}})]}}],null,!1,1699905645)}),n("el-table-column",{attrs:{prop:"stock",label:"库存",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input-number",{attrs:{min:0,"controls-position":"right",size:"mini"},model:{value:t.skus[e.$index].stock,callback:function(n){t.$set(t.skus[e.$index],"stock",n)},expression:"skus[scope.$index].stock"}})]}}],null,!1,2585949209)})],2),n("div",{staticClass:"standard-tools"},[n("span",{staticClass:"inline-text"},[t._v("批量设置")]),n("el-radio-group",{attrs:{size:"mini"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[n("el-radio-button",{attrs:{label:"price"}},[t._v("价格")]),n("el-radio-button",{attrs:{label:"marked_price"}},[t._v("市场价")]),n("el-radio-button",{attrs:{label:"stock"}},[t._v("库存")])],1),t.mode?n("el-input",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-setting"},on:{click:t.handleSettingSkus},slot:"append"})],1):t._e()],1)]:t._e(),t.test?[n("h3",[t._v("规格")]),n("small",[n("pre",[t._v(t._s(t.specification))])]),n("h3",[t._v("库存组合")]),n("small",[n("pre",[t._v(t._s(t.skus))])]),n("h3",[t._v("表格数据")]),n("small",[n("pre",[t._v(t._s(t.data))])]),n("h3",[t._v("合并表格行")]),n("small",[n("pre",[t._v(t._s(t.spanCollection))])])]:t._e()],2)},l=[],u=(n("8e6e"),n("456d"),n("6b54"),n("bd86")),p=(n("ac6a"),n("20d6"),n("28a5"),n("7f7f"),n("2ef0"));function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(n,!0).forEach(function(e){Object(u["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var h={props:{spec:Array,sku:Array,test:Boolean},data:function(){return{max:3,image:!1,checked:!1,specification:this.spec,skus:this.sku,attributeModelCache:[],visiableCache:[],data:[],spanCollection:[],mode:"",value:""}},computed:{enable:function(){return this.specification.length<this.max},skusCombination:function(){return this.skus.map(function(t){return t.combination})}},watch:{spec:function(){this.$emit("change-spec",this.spec)},skus:function(){this.$emit("change-sku",this.skus)}},methods:{computeRowspan:function(){var t=this;this.spanCollection=[];var e=function(e){var n=[],i=0;t.data.map(function(a,s){0===s?n.push(1):a[e]===t.data[s-1][e]?(n[i]+=1,n.push(0)):(i=s,n.push(1))}),t.spanCollection.push(n)};this.specification.map(function(t){e(t.name)})},handlePushSpecification:function(){console.log(this.enable),this.enable&&this.specification.push({name:"",attribute:[]})},handleRemoveSpecification:function(t){this.specification.splice(t,1),this.handleChangeSpecification("del")},handleToggleInput:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.$set(this.visiableCache,t,n),n&&this.$nextTick(function(){e.$refs["input_".concat(t)][0].focus()})},handleResetAttributeCache:function(t){this.attributeModelCache[t]=""},handleAddAttribute:function(t){var e=(this.attributeModelCache[t]||"").trim();if(e){var n=e.split(/\s+/);n=Object(p["uniq"])(this.specification[t].attribute.concat(n)),this.$set(this.specification[t],"attribute",n),this.handleResetAttributeCache(t),this.handleChangeSpecification("add")}this.handleToggleInput(t,!1)},handleRemoveAttribute:function(t,e){this.specification[t].attribute.splice(e,1),this.handleChangeSpecification("del")},computedSkus:function(t){var e=1;return this.specification.map(function(n,i){i>=t&&n.attribute.length&&(e*=n.attribute.length)}),e},handleChangeSpecification:function(t){var e=Object(p["cloneDeep"])(this.skus);"del"===t&&(this.skus=[]),console.log(this.computedSkus(0));for(var n=0;n<this.computedSkus(0);n++)this.handleChangeStocks(t,n,e)},handleChangeStocks:function(t,e,n){var i={price:0,stock:0,marked_price:0,combination:this.getCombination(e)},a=i.combination;if("add"===t)-1===this.skusCombination.findIndex(function(t){return Object(p["isEqual"])(a,t)})&&this.$set(this.skus,e,i);else if("del"===t){var s="";n.forEach(function(t){if(console.log(a,t.combination,Object(p["isEqual"])(a,t.combination)),Object(p["isEqual"])(a,t.combination))return s=t,!1}),this.skus.push(s||i)}this.tableData()},tableData:function(){var t=this;this.data=[],this.skus.map(function(e,n){t.data.push(f({},e,{},e.combination))}),this.computeRowspan()},handleGetSpecificationAttribute:function(t,e){var n,i=this.specification[t].attribute;n=this.specification[t+1]&&this.specification[t+1].attribute.length?e/this.computedSkus(t+1):e;var a=Math.floor(n%i.length);return"NaN"!==a.toString()?i[a]:""},getCombination:function(t){var e=this,n={};return this.specification.map(function(i,a){n[i.name]=e.handleGetSpecificationAttribute(a,t)}),n},handleSpanMethod:function(t){var e=t.row,n=t.column,i=t.rowIndex,a=t.columnIndex;console.log(e,n,i,a);for(var s=0;s<this.specification.length;s++)if(a===s)return this.spanCollection[s]&&this.spanCollection[s][i]?{rowspan:this.spanCollection[s][i],colspan:1}:{rowspan:0,colspan:0}},computedShow:function(t,e){return!!this.specification[t]&&e%this.computedSkus(t+1)===0},handleSettingSkus:function(){var t=this;""!==this.value&&this.skus.map(function(e){e[t.mode]=t.value})}},created:function(){this.test&&(this.specification=[{name:"颜色",attribute:["红色","白色","黑色"]}],this.skus=[{price:0,stock:0,marked_price:0,combination:{"颜色":"红色"}},{price:0,stock:0,marked_price:0,combination:{"颜色":"白色"}},{price:0,stock:0,marked_price:0,combination:{"颜色":"黑色"}}])},mounted:function(){this.tableData()}},b=h,m=(n("dfbb"),n("2877")),v=Object(m["a"])(b,r,l,!1,null,null,null),k=v.exports,g={data:function(){return{spec:[],sku:[]}},components:{Specification:k},methods:{handleChangeSpec:function(t){this.spec=t},handleChangeSku:function(t){this.sku=t}}},_=g,C=(n("5c0b"),Object(m["a"])(_,o,c,!1,null,null,null)),y=C.exports,S=n("2f62");i["default"].use(S["a"]);var x=new S["a"].Store({state:{},mutations:{},actions:{}});i["default"].config.productionTip=!1,i["default"].use(s.a,{size:"mini"}),new i["default"]({store:x,render:function(t){return t(y)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},dfbb:function(t,e,n){"use strict";var i=n("506b"),a=n.n(i);a.a}});
//# sourceMappingURL=app.f026d750.js.map